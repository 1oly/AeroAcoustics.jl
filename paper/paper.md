---
title: 'AeroAcoustics.jl: A julia package for aeroacoustics'
tags:
  - julia
  - acoustics
  - aerodynamics
  - acoustic imaging
  - beamforming
authors:
  - name: Oliver Lylloff^[corresponding  author] 
    orcid: 0000-0002-1596-107X
    affiliation: 1
affiliations:
 - name: Technical University of Denmark (DTU), Dept. of Wind and Energy Systems
   index: 1
date: 14 September 2023
bibliography: paper.bib
---

# Summary
Aeroacoustics is an interdisciplinary research field situated between aerodynamics and acoustics. It focuses on understanding the sound generated by the motion of air around solid bodies and plays an important role in research areas such as automotive, aerospace, and wind energy sciences [@Allen2002c].

However, the airflow responsible for sound generation typically generates unwanted background noise, which masks the true acoustic emission of the test item. Therefore, isolating the sound emitted by the test item becomes essential to obtain reliable evaluations, which is pivotal in the development of noise-reducing technologies for cars, airplanes, and wind turbines.

One common solution strategy involves the use of *acoustic images* computed using microphone arrays. These images help visualize and quantify the spatial distribution of noise across the test item. Analyzing these images enables precise assessment of acoustic emissions without contamination from background noise. 

`AeroAcoustics.jl` is a julia [@Bezanson2017] package for working with microphone arrays and acoustic imaging techniques. Methods for computing acoustic images often share the same codebase and utility functions, making them suitable candidates for a modular software package. It is the intention, that `AeroAcoustics.jl` can serve as a foundation for benchmarking existing methods and developing new ones within the aeroacoustics community.

# Statement of need
The `AeroAcoustics.jl` package provides a collection of commonly used acoustic imaging techniques, developed by the aeroacoustic community, such as conventional beamforming [@Johnson1993a], DAMAS [@Brooks2006], and CleanSC [@Sijtsma2007]. To use these methods, an `Environment` struct is defined in `AeroAcoustics.jl`, which holds essential information about the computational domain, microphone array geometry and measurement data (via the cross-spectral matrix `CSM`). As an example,
```
E = Environment(
    z0=z0,
    micgeom=micgeom,
    CSM=CSM,
    flim=(3000,4000),
    Nx = 21,
    Ny = 21,
    xlim=(-0.5,0.5),
    ylim=(-0.5,0.5),
    multi_thread = true
)
steeringvectors!(E)
b = beamforming(E)
```
where   
- `z0` is the distance from the microphone array to the acoustic imaging plane,  
- `micgeom` is the coordinates to each microphone in the microphone array,   
- `CSM` is the cross-spectral matrix,  
- `flim` are the frequency limits of interest,  
- `Nx` and `Ny` is the desired number of grid points in the x- and y-direction of the acoustic image  
- `xlim` and `ylim` is the desired extent of the acoustic image  
- `multi_thread` can enable or disable multi-threading in appropriate functions across the `AeroAcoustics.jl` package.  

Additional options are available for more detailed scenarios. The `Environment` struct is used by most functions in the `AeroAcoustics.jl` package, which makes it easy to add new methods and algorithms, because the required input is typically stored in `Environment`. In this example, `steeringvectors!(E)` mutates the argument and add steeringvectors to the `Environment`. The function is aware of the defined options and will only calculate for the appropriate domains, e.g., frequency limits, grid points, etc. Finally, the acoustic image is computed using `b = beamforming(E)`.

If the cross-spectral matrix is not available, a utility for computing one is available using time-domain recordings from each microphone. 
The `AeroAcoustics.jl` package also include newer techniques found in the literature, e.g., fista [@Lylloff2015] and mean mutual-coherence weights [@Amaral2018].

On a more fundamental level, `AeroAcoustics.jl` also provides utilities for working with frequency-domain data via the `FreqArray`, which is a simple array type with an associated frequency vector. In this way, arrays of the type `FreqArray` can be passed around between functions, and can always be related to the frequency-domain. This is for instance used by source integration, a technique to extract the acoustic energy from part of an acoustic image. Octave-band analysis is also provided by the package.

Used in [@LylloffPhD], wind tunnel tests [plct.dk], [@Fischer2022], [@Verges], [@Fischer2023], also in teaching [aeroacoustics].

Similar work was done in Acoular [@acoular]. Otherwise scattering matlab packages online.

The research community around acoustic imaging have developed benchmark test 
cases and compared results across different research groups [@Bahr2017;@Sarradj2017].
However, the software code was not compared or shared online. 

-----------------
(A Statement of need section that clearly illustrates the research purpose of the software and places it in the context of related work.)

Purpose of software is to
- Collect a range of commonly used algorithms (DAS, CleanSC, DAMAS)
- Add new methods, e.g. DR, fista, coherence stuff (Amaral et al. “Slat Noise from an MD30P30N Airfoil at Extreme Angles of Attack,”)
- Provide a set of utility functions for working with acoustic data (CSM, FreqArray, source integration, shear layer corrections, octave band analysis)
- Make it efficient (multi-threading)
- Easy to extent with new steeringvectors, algorithms, utilities





Microphone arrays and the algorithms used to create acoustic images, are also being used in domains
without flow. AeroAcoustics.jl can also be used here.

A noteworthy software packagage is Acoular [@acoular], that has similar features but written in Python.

Mention (if applicable) a representative set of past or ongoing research projects using the software and recent scholarly publications enabled by it.

# References